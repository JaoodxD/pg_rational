create extension pg_rational;
-- input
-- can parse a simple fraction
select '1/3'::rational;
 rational 
----------
 1/3
(1 row)

-- interprets negative numerator
select '-1/3'::rational;
 rational 
----------
 -1/3
(1 row)

-- moves negative value from denom to numer
select '1/-3'::rational;
 rational 
----------
 -1/3
(1 row)

-- double negative becomes positive
select '-1/-3'::rational;
 rational 
----------
 1/3
(1 row)

-- biggest values
select '9223372036854775807/9223372036854775807'::rational;
                rational                 
-----------------------------------------
 9223372036854775807/9223372036854775807
(1 row)

-- SEND works
select rational_send('1/3');
           rational_send            
------------------------------------
 \x00000000000000010000000000000003
(1 row)

-- too big
select '9223372036854775808/9223372036854775807'::rational;
ERROR:  numerator or denominator outside valid int64 value: "9223372036854775808/9223372036854775807"
LINE 1: select '9223372036854775808/9223372036854775807'::rational;
               ^
-- no spaces
select '1 /3'::rational;
ERROR:  invalid input syntax for fraction: "1 /3"
LINE 1: select '1 /3'::rational;
               ^
-- no zero denominator
select '1/0'::rational;
ERROR:  fraction cannot have zero denominator: "1/0"
LINE 1: select '1/0'::rational;
               ^
-- no single numbers
select '1'::rational;
ERROR:  invalid input syntax for fraction: "1"
LINE 1: select '1'::rational;
               ^
-- no garbage
select ''::rational;
ERROR:  invalid input syntax for fraction: ""
LINE 1: select ''::rational;
               ^
select 'sdfkjsdfj34984538'::rational;
ERROR:  invalid input syntax for fraction: "sdfkjsdfj34984538"
LINE 1: select 'sdfkjsdfj34984538'::rational;
               ^
